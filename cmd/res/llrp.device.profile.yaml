name: "Device.LLRP.Profile"
manufacturer: "Intel"
model: "RFID Reader"
labels:
  - "LLRP"
  - "RFID"
description: "Device profile of RFID based readers that communicate using LLRP protocol"

deviceResources:
  - name: "ReaderCapabilities"
    description: "The capabilities of a reader"
    properties:
      value:
        { type: "String", readWrite: "R", defaultValue: "" }
      units:
        { type: "String", readWrite: "R", defaultValue: "" }

  - name: "ReaderConfig"
    description: "Current configuration info of a reader"
    properties:
      value:
        { type: "String", readWrite: "RW", defaultValue: "" }
      units:
        { type: "String", readWrite: "R", defaultValue: "" }

  - name: "ROSpecID"
    description: "Client-generated Reader Operation Specification Identifier"
    properties:
      value: { type: "uint32", readWrite: "RW", defaultValue: "1" }
      units: { type: "String", readWrite: "R", defaultValue: "" }

  - name: "AccessSpecID"
    description: "Client-generated Access Specification Identifier"
    properties:
      value: { type: "uint32", readWrite: "RW", defaultValue: "1" }
      units: { type: "String", readWrite: "R", defaultValue: "" }

  - name: "ROSpec"
    description: >-
      An ROSpec is a "Reader Operation Specification", i.e.,
      a declarative description of when and how
      a reader should turn on its antennas and report data.
      It's passed via EdgeX as a string-encoded JSON struct.
    properties:
      value: { type: "String", readWrite: "RW", defaultValue: "" }
      units: { type: "String", readWrite: "R", defaultValue: "" }

  - name: "AccessSpec"
    description: ""
    properties:
      value:
        { type: "String", readWrite: "RW", defaultValue: "" }
      units:
        { type: "String", readWrite: "R", defaultValue: "" }

  - name: "Action"
    description: >-
      EdgeX's Device Service SDK only distinguishes between "GET" and "PUT";
      everything else must be a deviceResources.
      Since we won't have, e.g., information about the HTTP path used in a request,
      this resource exists only to distinguish actions to take on other resources.
    properties:
      value: { "type": "String", readWrite: "W", defaultValue: "" }
      units: { type: "String", readWrite: "R", defaultValue: "" }

  - name: "ROAccessReport"
    description: >-
      An ROAccessReport is the main report type in LLRP.
      They contain the TagReportData or RFSurveyReportData,
      as well as any Custom parameter data.
      The data returned depends on the device's default report configuration
      and the specific ROSpec's report configuration,
      as well as the environmental conditions
      that influence what tag data is successfully read.
    properties:
      value:
        { type: "String", readWrite: "R", defaultValue: "" }
      units:
        { type: "String", readWrite: "R", defaultValue: "" }

  - name: "ReaderEventNotification"
    description: >-
      Readers generate Reader Event Notifications for a variety of events,
      including changes in connectivity, antenna additions/removals,
      GPIO state changes, new report data, and exception events.
      Some event notifications are configurable.
    properties:
      value:
        { type: "String", readWrite: "R", defaultValue: "" }
      units:
        { type: "String", readWrite: "R", defaultValue: "" }

deviceCommands:
  - name: capabilities
    get:
      - { index: "1", operation: "get", deviceResource: "ReaderCapabilities"}

  - name: config
    get:
      - { index: "1", operation: "get", deviceResource: "ReaderConfig"}
    set:
      - { index: "1", operation: "set", deviceResource: "ReaderConfig"}

  - name: roSpec
    get:
      - { index: "1", operation: "get", deviceResource: "ROSpec"}
    set:
      - { index: "1", operation: "set", deviceResource: "ROSpec"}
  - name: enableROSpec
    set:
      - { index: "1", operation: "set", deviceResource: "ROSpecID", parameter: 0}
      - { index: "2", operation: "set", deviceResource: "Action", parameter: "Enable"}
  - name: startROSpec
    set:
      - { index: "1", operation: "set", deviceResource: "ROSpecID", parameter: 0}
      - { index: "2", operation: "set", deviceResource: "Action", parameter: "Start"}
  - name: stopROSpec
    set:
      - { index: "1", operation: "set", deviceResource: "ROSpecID", parameter: 0}
      - { index: "2", operation: "set", deviceResource: "Action", parameter: "Stop"}
  - name: disableROSpec
    set:
      - { index: "1", operation: "set", deviceResource: "ROSpecID", parameter: 0}
      - { index: "2", operation: "set", deviceResource: "Action", parameter: "Disable"}
  - name: deleteROSpec
    set:
      - { index: "1", operation: "set", deviceResource: "ROSpecID"}
      - { index: "2", operation: "set", deviceResource: "Action", parameter: "Delete"}

  - name: accessSpec
    get:
      - { index: "1", operation: "get", deviceResource: "AccessSpec"}
    set:
      - { index: "1", operation: "set", deviceResource: "AccessSpec"}
  - name: enableAccessSpec
    set:
      - { index: "1", operation: "set", deviceResource: "AccessSpecID", parameter: "0"}
      - { index: "2", operation: "set", deviceResource: "Action", parameter: "Enable"}
  - name: disableAccessSpec
    set:
      - { index: "1", operation: "set", deviceResource: "AccessSpecID", parameter: "0"}
      - { index: "2", operation: "set", deviceResource: "Action", parameter: "Disable"}
  - name: deleteAccessSpec
    set:
      - { index: "1", operation: "set", deviceResource: "AccessSpecID"}
      - { index: "2", operation: "set", deviceResource: "Action", parameter: "Delete"}

coreCommands:
  - name: GetReaderCapabilities
    get:
      path: "/api/v1/device/{deviceId}/capabilities"
      responses:
        - code: "200"
          description: "Get a reader's capabilities."
          expectedValues: ["ReaderCapabilities"]
        - code: "500"
          description: "Error"
          expectedValues: []

  - name: GetReaderConfig
    get:
      path: "/api/v1/device/{deviceId}/config"
      responses:
        - code: "200"
          description: "Get the reader's current configuration."
          expectedValues: ["ReaderConfig"]
        - code: "500"
          description: "Error"
          expectedValues: []

  - name: SetReaderConfig
    put:
      path: "/api/v1/device/{deviceId}/config"
      parameterNames: ["ReaderConfig"]
      responses:
        - code: "200"
          description: "Set a reader's configuration."
          expectedValues: []
        - code: "500"
          description: "Error"
          expectedValues: []

  - name: GetROSpec
    get:
      path: "/api/v1/device/{deviceId}/roSpec"
      responses:
        - code: "200"
          description: "Get ROSpecs."
          expectedValues: ["ROSpec"]
        - code: "500"
          description: "Error"
          expectedValues: []

  - name: AddROSpec
    put:
      path: "/api/v1/device/{deviceId}/roSpec"
      parameterNames: ["ROSpec"]
      responses:
        - code: "200"
          description: "Add an ROSpec."
          expectedValues: []
        - code: "500"
          description: "Error"
          expectedValues: []

  - name: EnableROSpec
    put:
      path: "/api/v1/device/{deviceId}/enableROSpec"
      parameterNames: ["ROSpecID"]
      responses:
        - code: "200"
          description: "Enable an ROSpec."
          expectedValues: []
        - code: "500"
          description: "Error"
          expectedValues: []

  - name: StartROSpec
    put:
      path: "/api/v1/device/{deviceId}/startROSpec"
      parameterNames: ["ROSpecID"]
      responses:
        - code: "200"
          description: "Start an ROSpec."
          expectedValues: []
        - code: "500"
          description: "Error"
          expectedValues: []

  - name: StopROSpec
    put:
      path: "/api/v1/device/{deviceId}/stopROSpec"
      parameterNames: ["ROSpecID"]
      responses:
        - code: "200"
          description: "Stop an ROSpec."
          expectedValues: []
        - code: "500"
          description: "Error"
          expectedValues: []

  - name: DisableROSpec
    put:
      path: "/api/v1/device/{deviceId}/disableROSpec"
      parameterNames: ["ROSpecID"]
      responses:
        - code: "200"
          description: "Disable an ROSpec."
          expectedValues: []
        - code: "500"
          description: "Error"
          expectedValues: []

  - name: DeleteROSpec
    put:
      path: "/api/v1/device/{deviceId}/deleteROSpec"
      parameterNames: ["ROSpecID"]
      responses:
        - code: "200"
          description: "Delete an ROSpec."
          expectedValues: []
        - code: "500"
          description: "Error"
          expectedValues: []

  - name: GetAccessSpec
    get:
      path: "/api/v1/device/{deviceId}/accessSpec"
      responses:
        - code: "200"
          description: "Get AccessSpecs."
          expectedValues: []
        - code: "500"
          description: "Error"
          expectedValues: []

  - name: AddAccessSpec
    put:
      path: "/api/v1/device/{deviceId}/accessSpec"
      parameterNames: ["AccessSpec"]
      responses:
        - code: "200"
          description: "Add an AccessSpec."
          expectedValues: []
        - code: "500"
          description: "Error"
          expectedValues: []

  - name: DisableAccessSpec
    put:
      path: "/api/v1/device/{deviceId}/disableAccessSpec"
      parameterNames: ["AccessSpecID"]
      responses:
        - code: "200"
          description: "Disable an AccessSpec."
          expectedValues: []
        - code: "500"
          description: "Error"
          expectedValues: []

  - name: DeleteAccessSpec
    put:
      path: "/api/v1/device/{deviceId}/deleteAccessSpec"
      parameterNames: ["AccessSpecID"]
      responses:
        - code: "200"
          description: "Delete an AccessSpec."
          expectedValues: []
        - code: "500"
          description: "Error"
          expectedValues: []
